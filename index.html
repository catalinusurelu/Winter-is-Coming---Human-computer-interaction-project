	<!DOCTYPE html>
	<html>
	<head>
		<style type="text/css">
			#map-canvas {
				width:800px;
				height:500px;
			}
		</style>

		<link rel="stylesheet" type="text/css" href="style.css">
		<title>Winter is comming</title>

		<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>

		<script type="text/javascript"
		src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCjbB09O_sqkZvZSiSBGiGlv_7RHSAUBIA"/>
	</script>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

	<!-- Optional: Include the jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<!-- Optional: Incorporate the Bootstrap JavaScript plugins -->
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

	<!-- Custom CSS -->
	<link href="/style.css" rel="stylesheet">

	<script type="text/javascript">
		var score = 0;

		function vote()
		{
			score++;
		}

		function myrand(x, y)
		{
			return Math.floor(Math.random() * y) + x;
		}

		function showlegend()
		{
			var elem = document.getElementById('legend');
			elem.style.display = 'block';
		}

		function hidelegend()
		{
			var elem = document.getElementById('legend');
			elem.style.display = 'none';
		}

		function initialize() {
			var center = new google.maps.LatLng(44.438606,26.049492);

			var mapOptions = {
				zoom: 15,
				center: new google.maps.LatLng(44.438606,26.049492)
			};

			var map = new google.maps.Map(document.getElementById('map-canvas'),
				mapOptions);

			for (var i = 0; i < 8; i++)
			{
				var marker = new google.maps.Marker({
					position: new google.maps.LatLng(
						44.438606 +  Math.random() / 50 ,
						26.049492 +  Math.random() / 50),
					map: map,
					title: 'Marker ' + i
				});

				google.maps.event.addListener(marker, 'click', function() {
					score++;
					showlegend();
					map.controls[google.maps.ControlPosition.TOP_CENTER].push(
						document.getElementById('legend'));
				});

				google.maps.event.addListener(map, 'click', function() {
					hidelegend();
				});
			}

			google.maps.event.addListener(map, 'click', function(event) {
				placeMarker(event.latLng);
			});


			function placeMarker(location) {

				var image = {
					url: 'images/snowCar.jpeg',
					origin: new google.maps.Point(0, 0),
					anchor: new google.maps.Point(25, 25),
					scaledSize: new google.maps.Size(50, 50)
				};

				var marker = new google.maps.Marker({
					position: location,
					map: map,
					icon: image
				});
			}

		}

		function loadScript() {
			hidelegend();
			var script = document.createElement('script');
			script.type = 'text/javascript';
			script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&' +
			'callback=initialize';
			document.body.appendChild(script);
		}

		window.onload = loadScript;


		function topEventsController($scope) {
			var request = $.ajax({
				url: "http://128.199.38.110:5000/top_events",
				type: "GET",
				conection: "keep-alive",
				contentType: "application/json",
				cache: false,
				timeout: 10000,
				processData: false,
				async: false

			});

			request.done(function(top_events) {
				$scope.top_events = $.parseJSON(top_events);
			});
		}

		function topUsersController($scope) {
			var request = $.ajax({
				url: "http://128.199.38.110:5000/top_users",
				type: "GET",
				conection: "keep-alive",
				contentType: "application/json",
				cache: false,
				timeout: 10000,
				processData: false,
				async: false

			});

			request.done(function(top_users) {
				$scope.top_users = $.parseJSON(top_users);
			});
		}

	</script>
	</head>

	<body>
		<div id="legend">
			<div class="container-fluid">
				<div class="row">
					<h3>Titlu eveniment</h3>
				</div>
				<div class="row">
					<div class="col-md-4">
						<img id="snow" src="images/snow.jpg" style="width:80px;height:80px;margin-top:10px">
					</div>
					<div class="col-md-8">
						<h5 style="margin-left:20px;">HELPERS:</h5>
						<ul>
							<li>Iordache Catalin</li>
							<li>Usurelu Catalin</li>
							<li>Dan Dragan</li>
						</ul>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4">
						<button id="upvote" type="button" onclick="vote()" style="margin-top:10px">Upvote!</button>
					</div>
					<div class="col-md-4">
						<h6 style="margin-left:30px;">Score: <h6>
						</div>
					</div>
				</div>
			</div>
			<div class="container" id="main">

				<!-- Navigation bar -->
				<div class="navbar navbar-fixed-top">
					<div class="container">
						<button class="navbar-toggle" data-target=".navbar-responsive-collapse" data-toggle="collapse" type="button">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>

						<a class="navbar-brand" id="winter"><b>Winter is Coming</b></a>

						<div class="nav-collapse collapse navbar-responsive-collapse">
							<ul class="nav navbar-nav">
								<li>
									<a href="index.html"><i class="glyphicon glyphicon-home"></i></a>
								</li>
							</ul>

							<form class="navbar-form pull-left">
								<input type="text" class="form-control" placeholder="Search for people and events" id="searchInput">
								<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
							</form>

							<ul class="nav navbar-nav pull-right">
								<li class="dropdown">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span> Iordache Catalin  46<span style="color:#F7BE81;" class="glyphicon glyphicon-star"></span><strong class="caret"></strong></a>
									<ul class="dropdown-menu">

										<li>
											<a href="user.html"> Profile</a>
										</li>

										<li class="divider"></li>

										<li>
											<a href="#"><span class="glyphicon glyphicon-off"></span> Sign out</a>
										</li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</div> <!-- End Navigation bar -->

				<!-- Buttons and map-->
				<div class="row col-sm-9">

					<!-- Buttons-->
					<div class="row col-sm-9">

						<div class="col-xs-6 col-md-4">
							<a href="#carModal" role="button" data-toggle="modal"><input type="image" id="myimage" src="images/snowCar.png"/></a>

							<!-- carModal -->
							<div class="modal fade" id="carModal">
								<div class="modal-dialog">
									<div class="modal-content">

										<div class="modal-header">
											<button class="close" data-dismiss="modal">&times;</button>
											<h4 class="modal-title"><b>[C]</b>Masina ta este inzapezita</h4>
										</div><!-- end modal-header -->

										<div class="modal-body">
											<p>Adauga un titlu sugestiv situatiei tale, dupa care transmite un mesaj de ajutor celor din apropierea ta impreuna cu locul exact unde te afli.</p>

											<hr>
											<p><small class="text-muted"><span class="tags">hint:</span> o fotografie face cat o mie de cuvinte</small></p>

											<form class="form-horizontal">
												<div class="form-group">
													<label class="col-lg-2 control-label" for="inputName">Titlu</label>
													<div class="col-lg-10">
														<input class="form-control" id="inputName" placeholder="Name" type="text">
													</div>
												</div>

												<div class="form-group">
													<label class="col-lg-2 control-label" for="inputMessage">Mesaj</label>
													<div class="col-lg-10">
														<textarea class="form-control" id="inputMessage" placeholder="Message" rows="3"></textarea>
													</div>
												</div>
											</form>
										</div><!-- end modal-body -->

										<div class="modal-footer">
											<button class="btn btn-danger" data-dismiss="modal" type="button"><span class="glyphicon glyphicon glyphicon-camera"></span></button>
											<button class="btn btn-danger" data-dismiss="modal" type="button"><span class="glyphicon glyphicon-map-marker"></span> </button>
											<button class="btn btn-success " type="button">Post</button>

										</div><!-- end modal-footer -->

									</div><!-- end modal-content -->
								</div><!-- end modal-dialog -->
							</div><!-- end carModal -->
						</div>

						<div class="col-xs-6 col-md-4">
							<a href="#sideWalkModal" role="button" data-toggle="modal"><input type="image" id="myimage" src="images/snowSideWalk.png"/></a>

							<!--  sideWalkModal -->
							<div class="modal fade" id="sideWalkModal">
								<div class="modal-dialog">
									<div class="modal-content">

										<div class="modal-header">
											<button class="close" data-dismiss="modal">&times;</button>
											<h4 class="modal-title"><b>[sW]</b>Trotuarul este inzapezit</h4>
										</div><!-- end modal-header -->

										<div class="modal-body">
											<p>Adauga un titlu sugestiv situatiei tale, dupa care transmite un mesaj de ajutor celor din apropierea ta impreuna cu locul exact unde te afli.</p>

											<hr>
											<p><small class="text-muted"><span class="tags">hint:</span> o fotografie face cat o mie de cuvinte</small></p>

											<form class="form-horizontal">
												<div class="form-group">
													<label class="col-lg-2 control-label" for="inputName">Titlu</label>
													<div class="col-lg-10">
														<input class="form-control" id="inputName" placeholder="Name" type="text">
													</div>
												</div>

												<div class="form-group">
													<label class="col-lg-2 control-label" for="inputMessage">Mesaj</label>
													<div class="col-lg-10">
														<textarea class="form-control" id="inputMessage" placeholder="Message" rows="3"></textarea>
													</div>
												</div>
											</form>
										</div><!-- end modal-body -->

										<div class="modal-footer">
											<button class="btn btn-primary" data-dismiss="modal" type="button"><span class="glyphicon glyphicon glyphicon-camera"></span></button>
											<button class="btn btn-danger" data-dismiss="modal" type="button"><span class="glyphicon glyphicon-map-marker"></span> </button>
											<button class="btn btn-success " type="button">Post</button>

										</div><!-- end modal-footer -->

									</div><!-- end modal-content -->
								</div><!-- end modal-dialog -->
							</div><!-- end sideWalkModal -->
						</div>

						<div class="col-xs-6 col-md-4">
							<a href="#roadModal" role="button" data-toggle="modal"><input type="image" id="myimage" src="images/snowRoad.png"/></a>

							<!-- RoadModal -->
							<div class="modal fade" id="roadModal">
								<div class="modal-dialog">
									<div class="modal-content">

										<div class="modal-header">
											<button class="close" data-dismiss="modal">&times;</button>
											<h4 class="modal-title"><b>[R]</b>Drumul este inzapezit</h4>
										</div><!-- end modal-header -->

										<div class="modal-body">
											<p>Adauga un titlu sugestiv situatiei tale, dupa care transmite un mesaj de ajutor celor din apropierea ta impreuna cu locul exact unde te afli.</p>

											<hr>
											<p><small class="text-muted"><span class="tags">hint:</span> o fotografie face cat o mie de cuvinte</small></p>

											<form class="form-horizontal">
												<div class="form-group">
													<label class="col-lg-2 control-label" for="inputName">Titlu</label>
													<div class="col-lg-10">
														<input class="form-control" id="inputName" placeholder="Name" type="text">
													</div>
												</div>

												<div class="form-group">
													<label class="col-lg-2 control-label" for="inputMessage">Mesaj</label>
													<div class="col-lg-10">
														<textarea class="form-control" id="inputMessage" placeholder="Message" rows="3"></textarea>
													</div>
												</div>
											</form>
										</div><!-- end modal-body -->

										<div class="modal-footer">
											<button class="btn btn-primary" data-dismiss="modal" type="button"><span class="glyphicon glyphicon glyphicon-camera"></span></button>
											<button class="btn btn-danger" data-dismiss="modal" type="button"><span class="glyphicon glyphicon-map-marker"></span> </button>
											<button class="btn btn-success " type="button">Post</button>

										</div><!-- end modal-footer -->

									</div><!-- end modal-content -->
								</div><!-- end modal-dialog -->
							</div><!-- end RoadModal -->
						</div>
					</div> <!-- End Buttons-->

					<!-- map-->
					<div class="row col-sm-9">
						<h4><span class="glyphicon glyphicon-map-marker"></span> Your Location<small> Events near you</small></h4>

						<div class="col-sm-9">
							<div class="google-map-canvas" id="map-canvas">
							</div>
						</div>
					</div> <!-- end map-->

				</div> <!--End Buttons and map-->

				<!-- Right Side Panels -->
				<div class="row col-sm-3 spacer">

					<!-- Top Users panel -->
					<div class="panel panel-default panel-width">
						<div class="panel-heading">
							<h3 class="panel-title"><b>Top Users</b></h3>
						</div>
						<div ng-app="" ng-controller="topUsersController"  style=" height: 270px; overflow-y:auto !important;" class="panel-body panel-height">
							<p ng-repeat="x in top_users"> <a href="user.html"> {{ x.upvotes }} <span style="color:#F7BE81;" class="glyphicon glyphicon-star"></span> </a> {{ x.first_name + " " + x.last_name }}  </p>


						</div>
					</div> <!-- End Top Users panel -->

					<!-- Top Events panel -->
					<div class="panel panel-default panel-width">
						<div class="panel-heading ">
							<h3 class="panel-title"><b>Top Events</b></h3>
						</div>
						<div ng-app="" ng-controller="topEventsController" style=" height: 270px; overflow-y:auto !important;" class="panel-body panel-height">
							<p ng-repeat="x in top_events">
								{{ x.upvotes }} <a href="#"><span style="color:#F7BE81;" class="glyphicon glyphicon-star"></span> </a> {{ x.name }} </p>

							</div>
						</div> <!-- End Top Events panel -->

					</div> <!-- End right  side panels -->

					<!-- Events near you -->
					<div class="row col-sm-12">
						<div class="panel panel-default">
							<div class="panel-heading"></div>
							<div div style=" height: 100px; overflow-y:auto !important;" class="panel-body panel-height">
								<p><a href="#"><span style="color:#FF0040; " class="glyphicon glyphicon-star"></span> Deszapezire trotuare Regie P15-P16-P17 </a></p>
								<p><a href="#"><span style="color:#FF0040; " class="glyphicon glyphicon-star"></span> </a></p>
								<p><a href="#"><span style="color:#FF0040; " class="glyphicon glyphicon-star"></span> </a></p>
								<p><a href="#"><span style="color:#FF0040; " class="glyphicon glyphicon-star"></span> </a></p>
								<p><a href="#"><span style="color:#FF0040; " class="glyphicon glyphicon-star"></span> </a></p>
							</div>
						</div>
					</div> <!-- End events near you -->

				</body>
				</html>
